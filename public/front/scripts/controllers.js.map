{"version":3,"sources":["dashboardControllers.js","bodyControllers.js","registerControllers.js","adminControllers.js","usersControllers.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"controllers.js","sourcesContent":["interMap.controller('dashboardController', ['$scope', function ($scope) {\n        console.log('dashboardController');\n    }]);\ninterMap.controller('testController', ['$scope', function ($scope) {\n        console.log('testController');\n    }]);\n","interMap.controller('bodyController', ['$scope', '$rootScope', '$http', '$state', '$location', 'growl', function ($scope, $rootScope, $http, $state, $location, growl) {\n        \n        $rootScope.$state = $state;\n        \n        $scope.admin = false;\n        \n        if(angular.isDefined($rootScope.loggedUser)) {\n            if($rootScope.loggedUser) {\n                $scope.loggedUser = true;\n            }\n        } else { \n            $scope.loggedUser = false;\n            $state.go('login');\n        }\n        \n        angular.extend($scope, {\n            logIn: function (loginForm) {\n                $http({\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                    url: '/auth',\n                    method: 'POST',\n                    data: {\n                        email: $scope.login.username,\n                        password: $scope.login.password\n                    }\n                }).success(function (response) {\n                    if (response.success) {\n                        $rootScope.permissions = {};\n                        $rootScope.permissions.user = response.data;\n                        $rootScope.loggedUser = true;\n                        $scope.loggedUser = true;\n                        $state.go('dashboard');\n                        growl.addSuccessMessage('Witaj ' + response.data.name + '!');\n                    } else {\n                        growl.addErrorMessage(response.error);\n                    }\n                });\n            }\n        });\n        \n        $scope.logout = function () {\n            $scope.loggedUser = false;\n            $rootScope.loggedUser = false;\n            $state.go('login');\n            growl.addErrorMessage('Zostałeś wylogowany ! Zapraszamy ponownie !');\n        }\n        \n        $scope.register = function () {\n            $state.go('register');\n        }\n        \n        $scope.adminMenu = function() {\n            $scope.admin = !$scope.admin;\n        }\n    }]);\n\n","interMap.controller('registerController', ['$scope', '$rootScope', '$http', '$state', 'growl', function ($scope, $rootScope, $http, $state, growl) {\n        angular.extend($scope, {\n            registerIn: function (registerForm) {\n                console.log($scope.user);\n                $http({\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                    url: '/register',\n                    method: 'POST',\n                    data:  $scope.user\n                }).success(function (response) {\n                    if (response.success) {\n                        $state.go('login');\n                        growl.addSuccessMessage('Rejestracja przebiegła pomyślnie !');\n                    } else {\n                        $scope.error = response.error;\n                    }\n                });\n            }\n        });\n    }]);\n","interMap.controller('adminController', ['$scope', '$rootScope', '$http', '$state', 'growl', function ($scope, $rootScope, $http, $state, growl) {\n\n    }]);\n","interMap.controller('usersController', ['$scope', '$rootScope', '$http', '$state', 'growl', function ($scope, $rootScope, $http, $state, growl) {\n\n        var url = '/api/user/';\n\n        $scope.getUsers = function () {\n            return $http.get(url);\n        };\n\n        $scope.removeUser = function (id) {\n            return $http.delete(url + id);\n        }\n\n        $scope.getUsers()\n                .then(function (response) {\n                    if (response.data.success) {\n                        $scope.users = response.data.data;\n                    }\n                });\n\n        $scope.remove = function ($event, id) {\n            $event.stopImmediatePropagation();\n\n            $scope.removeUser(id).\n                    success(function (data) {\n                        if (data.success) {\n                            angular.forEach($scope.users, function (val, key) {\n                                if (val.id == id) {\n                                    $scope.users.splice(key, 1);\n                                }\n                            });\n                            growl.addSuccessMessage('Użytkownik został usunięty !');\n                        } else if (data.error) {\n                            growl.addErrorMessage(data.error);\n                        }\n                    });\n        };\n\n        $scope.editUser = function (id) {\n            var params = {};\n            params.userId = id;\n            $state.go('editUser', params);\n        };\n\n        $scope.addUser = function () {\n            $state.go('newUser');\n        };\n\n    }]);\n\ninterMap.controller('userController', ['$scope', '$stateParams', '$rootScope', '$http', '$state', 'growl', function ($scope, $stateParams, $rootScope, $http, $state, growl) {\n\n        if (angular.isDefined($stateParams.userId)) {\n            $scope.userId = $stateParams.userId;\n        }\n\n        $scope.editMode = false;\n        $scope.user = {};\n        $scope.roles = ['user', 'admin'];\n\n        var url = '/api/user/';\n\n        if (angular.isDefined($scope.userId)) {\n            $scope.editMode = true;\n\n            $http.get(url + $scope.userId)\n                    .then(function (response) {\n                        if (response.data.success) {\n                            $scope.user = response.data.user;\n                        } else {\n                            growl.addErrorMessage(response.data.error);\n                        }\n                    });\n        }\n\n        $scope.cancel = function () {\n            $state.go('users');\n        };\n\n        $scope.saveUser = function (user, editMode) {\n            if (editMode) {\n                return $http.put(url + $scope.user.id, user)\n                        .then(function (response) {\n                            console.log(response);\n                            if (response.data.success) {\n                                growl.addSuccessMessage('Użytkownik został zaktualizowany !');\n                                $state.go('users');\n                            } else {\n                                $scope.error = response.data.error;\n                            }\n                        });\n            } else {\n                return $http.post(url, user)\n                        .then(function (response) {\n                            console.log(response);\n                            if (response.data.success) {\n                                growl.addSuccessMessage('Użytkownik został dodany !');\n                                $state.go('users');\n                            } else {\n                                $scope.error = response.data.error;\n                            }\n                        });\n            }\n        };\n\n        $scope.passMismatched = function () {\n            if (angular.isDefined($scope.userForm)) {\n                return $scope.userForm.password_confirmation.$error.match;\n            }\n        };\n\n    }]);\n"],"sourceRoot":"/source/"}